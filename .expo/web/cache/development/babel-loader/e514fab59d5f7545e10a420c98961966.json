{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/steven/Desktop/CupOJavaScript/components/main/Profile.js\";\nimport React, { useState } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport fire from \"../fire\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport { LinearGradient } from 'expo-linear-gradient';\nimport MaterialCommunityIcons from '@react-navigation/material-bottom-tabs';\nimport colors from \"../../assets/colors/colors\";\nimport profileStyles from \"../../assets/styles/profileStyles\";\n\nvar handleLogout = function handleLogout() {\n  fire.auth().signOut();\n};\n\nexport default function Profile() {\n  var usersDB = fire.firestore().collection('users');\n  var userID = fire.auth().currentUser.uid;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      firstName = _useState2[0],\n      setFirstName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lastName = _useState4[0],\n      setLastName = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      sex = _useState6[0],\n      setSex = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      age = _useState8[0],\n      setAge = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      weight = _useState10[0],\n      setWeight = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      feet = _useState12[0],\n      setFeet = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      inches = _useState14[0],\n      setInches = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      bmi = _useState16[0],\n      setBmi = _useState16[1];\n\n  var _useState17 = useState(undefined),\n      _useState18 = _slicedToArray(_useState17, 2),\n      profilePic = _useState18[0],\n      setProfilePic = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      userDataIsRetrieved = _useState20[0],\n      setUserDataIsRetrieved = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      purpose = _useState22[0],\n      setPurpose = _useState22[1];\n\n  var newFirstName = firstName;\n  var newLastName = lastName;\n  var newAge = age;\n  var newWeight = weight;\n  var newFeet = feet;\n  var newInches = inches;\n\n  function validateProfileEdits() {\n    if (userDataIsRetrieved) {\n      var errorMsg = 'Invalid fields:';\n      var isError = false;\n\n      if (newFirstName == '' || newLastName == '') {\n        errorMsg += '\\nName';\n        isError = true;\n      }\n\n      if (newAge == '' || isNaN(newAge) || newAge < 1 || newAge > 120) {\n        errorMsg += '\\nAge';\n        isError = true;\n      }\n\n      if (newInches == '' || isNaN(newInches) || newInches < 0 || newInches > 11 || newFeet == '' || isNaN(newFeet) || newFeet < 0 || newFeet > 10) {\n        errorMsg += '\\nHeight';\n        isError = true;\n      }\n\n      if (newWeight == '' || isNaN(newWeight) || newWeight < 0 || newWeight > 1500) {\n        errorMsg += '\\nWeight';\n        isError = true;\n      }\n\n      if (isError == true) {\n        alert(errorMsg);\n        isError = false;\n      } else {\n        updateProfile();\n      }\n    }\n  }\n\n  var updateProfile = function updateProfile() {\n    usersDB.doc(userID).update({\n      first_name: newFirstName,\n      last_name: newLastName,\n      age: newAge,\n      feet: newFeet,\n      inches: newInches,\n      weight: newWeight,\n      bmi: calcBMI()\n    });\n    setUserDataIsRetrieved(false);\n  };\n\n  var calcBMI = function calcBMI() {\n    var totalHeight = feet * 12 + parseFloat(inches);\n    return (weight * 703 / (totalHeight * totalHeight)).toFixed(2);\n  };\n\n  var getUserInfo = function getUserInfo() {\n    usersDB.doc(userID).get().then(function (snapshot) {\n      setFirstName(snapshot.data().first_name);\n      setLastName(snapshot.data().last_name);\n      setSex(snapshot.data().sex);\n      setAge(snapshot.data().age);\n      setWeight(snapshot.data().weight);\n      setFeet(snapshot.data().feet);\n      setInches(snapshot.data().inches);\n      setBmi(snapshot.data().bmi);\n      setProfilePic(snapshot.data().profilePicId);\n      setPurpose(snapshot.data().purpose);\n    });\n    setUserDataIsRetrieved(true);\n  };\n\n  if (userDataIsRetrieved == false) {\n    getUserInfo();\n  }\n\n  return React.createElement(LinearGradient, {\n    colors: [colors.lightBlue, colors.darkBlue],\n    style: profileStyles.outerScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }\n  }, React.createElement(SafeAreaView, {\n    style: profileStyles.contentCenter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: profileStyles.innerScreen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }\n  }, React.createElement(View, {\n    style: {\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.pageHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 21\n    }\n  }, \"Profile\"), React.createElement(Image, {\n    source: {\n      uri: profilePic\n    },\n    style: profileStyles.profilePicture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  })), React.createElement(View, {\n    style: profileStyles.profileRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.profileData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 17\n    }\n  }, \"Name  \"), React.createElement(TextInput, {\n    style: profileStyles.profileInput,\n    placeholder: firstName.toString() + \" \",\n    returnKeyType: \"done\",\n    onChangeText: function onChangeText(editedFirstName) {\n      return newFirstName = editedFirstName;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 72\n    }\n  }), React.createElement(TextInput, {\n    style: profileStyles.profileInput,\n    placeholder: lastName.toString(),\n    returnKeyType: \"done\",\n    onChangeText: function onChangeText(editedLastName) {\n      return newLastName = editedLastName;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  })), React.createElement(View, {\n    style: profileStyles.profileRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.profileData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }\n  }, \"Age  \"), React.createElement(TextInput, {\n    style: profileStyles.profileInput,\n    placeholder: age.toString(),\n    returnKeyType: \"done\",\n    onChangeText: function onChangeText(editedAge) {\n      return newAge = editedAge;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 71\n    }\n  })), React.createElement(View, {\n    style: profileStyles.profileRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.profileData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 17\n    }\n  }, \"Height  \"), React.createElement(TextInput, {\n    style: profileStyles.heightInput,\n    placeholder: feet.toString(),\n    returnKeyType: \"done\",\n    onChangeText: function onChangeText(editedFeet) {\n      return newFeet = editedFeet;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 74\n    }\n  }), React.createElement(Text, {\n    style: {\n      fontSize: 17,\n      fontFamily: 'Montserrat-SemiBold',\n      color: \"#000000\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, \"'  \"), React.createElement(TextInput, {\n    style: profileStyles.heightInput,\n    placeholder: inches.toString(),\n    returnKeyType: \"done\",\n    onChangeText: function onChangeText(editedInches) {\n      return newInches = editedInches;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }\n  }), React.createElement(Text, {\n    style: {\n      fontSize: 17,\n      fontFamily: 'Montserrat-SemiBold',\n      color: \"#000000\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, \"\\\"\")), React.createElement(View, {\n    style: profileStyles.profileRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.profileData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 17\n    }\n  }, \"Weight  \"), React.createElement(TextInput, {\n    style: profileStyles.weightInput,\n    placeholder: weight.toString(),\n    returnKeyType: \"done\",\n    onChangeText: function onChangeText(editedWeight) {\n      return newWeight = editedWeight;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 74\n    }\n  }), React.createElement(Text, {\n    style: profileStyles.profileInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 17\n    }\n  }, \" lbs\")), React.createElement(View, {\n    style: profileStyles.profileRow,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.profileData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, \"BMI \"), React.createElement(Text, {\n    style: profileStyles.profileInput,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 70\n    }\n  }, bmi.toString()), React.createElement(Text, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }, \"\\n\\n\")), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      marginLeft: 50,\n      marginBottom: 25\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: profileStyles.profileData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  }, \"I want to \" + purpose.toString() + \" weight!\", \" \")), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      justifyContent: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }, React.createElement(Button, {\n    style: profileStyles.profileButton,\n    title: \"Save changes\",\n    onPress: function onPress() {\n      return validateProfileEdits();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 17\n    }\n  }), React.createElement(Button, {\n    style: profileStyles.profileButton,\n    onPress: handleLogout,\n    title: \"Logout\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 17\n    }\n  })))));\n}","map":{"version":3,"sources":["/Users/steven/Desktop/CupOJavaScript/components/main/Profile.js"],"names":["React","useState","StatusBar","fire","SafeAreaView","LinearGradient","MaterialCommunityIcons","colors","profileStyles","handleLogout","auth","signOut","Profile","usersDB","firestore","collection","userID","currentUser","uid","firstName","setFirstName","lastName","setLastName","sex","setSex","age","setAge","weight","setWeight","feet","setFeet","inches","setInches","bmi","setBmi","undefined","profilePic","setProfilePic","userDataIsRetrieved","setUserDataIsRetrieved","purpose","setPurpose","newFirstName","newLastName","newAge","newWeight","newFeet","newInches","validateProfileEdits","errorMsg","isError","isNaN","alert","updateProfile","doc","update","first_name","last_name","calcBMI","totalHeight","parseFloat","toFixed","getUserInfo","get","then","snapshot","data","profilePicId","lightBlue","darkBlue","outerScreen","contentCenter","innerScreen","alignItems","pageHeader","uri","profilePicture","profileRow","profileData","profileInput","toString","editedFirstName","editedLastName","editedAge","heightInput","editedFeet","fontSize","fontFamily","color","editedInches","weightInput","editedWeight","flexDirection","marginLeft","marginBottom","justifyContent","profileButton"],"mappings":"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","sourcesContent":["import React, {useState} from 'react'\nimport { StatusBar } from 'expo-status-bar'\nimport fire from '../fire'\nimport { Text, View, Button, TextInput, Image } from 'react-native'\nimport { SafeAreaView } from 'react-native-safe-area-context'\nimport { LinearGradient } from 'expo-linear-gradient';\nimport MaterialCommunityIcons from '@react-navigation/material-bottom-tabs'\nimport colors from '../../assets/colors/colors';\nimport profileStyles from '../../assets/styles/profileStyles'\n\nconst handleLogout = () => \n{\n    fire.auth().signOut();\n}\n\nexport default function Profile()\n{    \n    const usersDB = fire.firestore().collection('users')\n    const userID = fire.auth().currentUser.uid\n\n    const [firstName, setFirstName] = useState(\"\");\n    const [lastName, setLastName] = useState(\"\");\n    const [sex, setSex] = useState(\"\");\n    const [age, setAge] = useState(\"\");\n    const [weight, setWeight] = useState(\"\");\n    const [feet, setFeet] = useState(\"\");\n    const [inches, setInches] = useState(\"\");\n    const [bmi, setBmi] = useState(\"\");\n    const [profilePic, setProfilePic] = useState(undefined);\n    const [userDataIsRetrieved, setUserDataIsRetrieved] = useState(false);\n    const [purpose, setPurpose] = useState(\"\");\n\n    //for profile editing. hooks update too slowly.\n    let newFirstName = firstName;\n    let newLastName = lastName;\n    let newAge = age;\n    let newWeight = weight;\n    let newFeet = feet;\n    let newInches = inches;\n\n    function validateProfileEdits()\n    {\n        if (userDataIsRetrieved)\n        {\n            let errorMsg = 'Invalid fields:';\n            let isError = false;\n\n            //Check if name is empty\n            if (newFirstName == '' || newLastName =='')\n            {\n                errorMsg += '\\nName';\n                isError = true;\n            }\n            //Check if age is valid\n            if (newAge == '' || isNaN(newAge) || newAge < 1 || newAge > 120)\n            {\n                errorMsg += '\\nAge';\n                isError = true;\n            }\n            //Check if height is valid\n            if (newInches == '' || isNaN(newInches) || newInches < 0 || newInches > 11 || newFeet == '' || isNaN(newFeet) || newFeet < 0 || newFeet > 10)\n            {\n                errorMsg += '\\nHeight';\n                isError = true;\n            }\n            //Check if weight is valid\n            if (newWeight == '' || isNaN(newWeight) || newWeight < 0 || newWeight > 1500)\n            {\n                errorMsg += '\\nWeight';\n                isError = true;\n            }\n\n            //If an error was detected.\n            if (isError == true)\n            {\n                alert(errorMsg);\n                isError = false;\n            }\n            //If everything is valid\n            else\n            {\n                updateProfile();\n            }\n        }\n    }\n\n    const updateProfile = () =>\n    {\n        usersDB.doc(userID).update({\n            first_name: newFirstName,\n            last_name: newLastName,\n            age: newAge,\n            feet: newFeet,\n            inches: newInches,\n            weight: newWeight,\n            bmi: calcBMI()\n            })\n\n        setUserDataIsRetrieved(false);\n    }\n\n    const calcBMI = () =>\n    {\n        let totalHeight = (feet * 12) + parseFloat(inches);\n        return ((weight * 703) / (totalHeight * totalHeight)).toFixed(2);\n    }\n\n    //Get user information from firestore\n    const getUserInfo = () =>\n    {\n        usersDB.doc(userID).get().then((snapshot => \n        {\n            setFirstName(snapshot.data().first_name)\n            setLastName(snapshot.data().last_name)\n            setSex(snapshot.data().sex)\n            setAge(snapshot.data().age)\n            setWeight(snapshot.data().weight)\n            setFeet(snapshot.data().feet)\n            setInches(snapshot.data().inches)\n            setBmi(snapshot.data().bmi)\n            setProfilePic(snapshot.data().profilePicId)\n            setPurpose(snapshot.data().purpose)\n        }))\n\n        setUserDataIsRetrieved(true);\n    }\n\n    if (userDataIsRetrieved == false)\n    {\n        getUserInfo();\n    }\n\n    return (\n        <LinearGradient colors={[colors.lightBlue, colors.darkBlue]} style={profileStyles.outerScreen}>\n        <SafeAreaView style = {profileStyles.contentCenter}>\n            <View style = {profileStyles.innerScreen}>\n\n                <View style={{ alignItems: 'center'}}>\n                    <Text style = {profileStyles.pageHeader}>Profile</Text>\n                    <Image source={{ uri: profilePic }} style={profileStyles.profilePicture}/>\n                </View>\n                <View style = {profileStyles.profileRow}>\n                <Text style = {profileStyles.profileData}>Name  </Text><TextInput \n                    style = {profileStyles.profileInput}\n                    placeholder = {firstName.toString() + \" \"}\n                    returnKeyType = 'done'\n                    onChangeText = {editedFirstName => newFirstName = editedFirstName}\n                />\n                <TextInput \n                    style = {profileStyles.profileInput}\n                    placeholder = {lastName.toString()}\n                    returnKeyType = 'done'\n                    onChangeText = {editedLastName => newLastName = editedLastName}\n                />\n                </View>\n\n                <View style = {profileStyles.profileRow}>\n                <Text style = {profileStyles.profileData}>Age  </Text><TextInput \n                    style = {profileStyles.profileInput}\n                    placeholder = { age.toString() }\n                    returnKeyType = 'done'\n                    onChangeText = {editedAge => newAge = editedAge}\n                />\n                </View>\n\n                <View style = {profileStyles.profileRow}>\n                <Text style = {profileStyles.profileData}>Height  </Text><TextInput \n                    style = {profileStyles.heightInput}\n                    placeholder = { feet.toString() }\n                    returnKeyType = 'done'\n                    onChangeText = {editedFeet => newFeet = editedFeet}\n                />\n                <Text style = {{fontSize: 17, fontFamily: 'Montserrat-SemiBold', color: \"#000000\",}}>'  </Text>\n                <TextInput \n                    style = {profileStyles.heightInput}\n                    placeholder = { inches.toString() }\n                    returnKeyType = 'done'\n                    onChangeText = {editedInches => newInches = editedInches}\n                />\n                <Text style = {{fontSize: 17, fontFamily: 'Montserrat-SemiBold', color: \"#000000\",}}>\"</Text>\n                </View>\n\n                <View style = {profileStyles.profileRow}>\n                <Text style = {profileStyles.profileData}>Weight  </Text><TextInput \n                    style = {profileStyles.weightInput}\n                    placeholder = { weight.toString() }\n                    returnKeyType = 'done'\n                    onChangeText = {editedWeight => newWeight = editedWeight}\n                />\n                <Text style = {profileStyles.profileInput}> lbs</Text>\n                </View>\n                <View style = {profileStyles.profileRow}>\n                <Text style = {profileStyles.profileData}>BMI </Text><Text style = {profileStyles.profileInput}>{bmi.toString()}</Text>\n                <Text>{`\\n\\n`}</Text>\n                </View>\n                <View style = {{flexDirection: 'row', marginLeft: 50, marginBottom: 25}}>\n                <Text style = {profileStyles.profileData}>{\"I want to \" + purpose.toString() + \" weight!\"} </Text>\n                </View>\n\n                <View style={{ flexDirection: 'row', justifyContent: 'center'}}>\n                <Button\n                    style = {profileStyles.profileButton}\n                    title = 'Save changes'\n                    onPress = {() => validateProfileEdits()}\n                />\n                <Button\n                    style = {profileStyles.profileButton}\n                    onPress = {handleLogout}\n                    title = 'Logout'\n                />\n                </View>\n            </View>\n        </SafeAreaView>\n        </LinearGradient>\n    );\n}   \n\n"]},"metadata":{},"sourceType":"module"}